"use strict";

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }
function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _iterableToArray(iter) { if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter); }
function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
document.addEventListener('DOMContentLoaded', function () {
  // slides up/down/toggle
  var slideUpQna = function slideUpQna(target) {
    var duration = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 400;
    target.style.transitionProperty = 'height, margin, padding';
    target.style.transitionDuration = duration + 'ms';
    target.style.height = target.offsetHeight + 'px';
    target.offsetHeight;
    target.style.overflow = 'hidden';
    target.style.height = 0;
    target.style.paddingTop = 0;
    target.style.paddingBottom = 0;
    target.style.marginTop = 0;
    target.style.marginBottom = 0;
    target.previousElementSibling.style.pointerEvents = 'none';
    window.setTimeout(function () {
      target.style.display = 'none';
      target.style.removeProperty('height');
      target.style.removeProperty('padding-top');
      target.style.removeProperty('padding-bottom');
      target.style.removeProperty('margin-top');
      target.style.removeProperty('margin-bottom');
      target.style.removeProperty('overflow');
      target.style.removeProperty('transition-duration');
      target.style.removeProperty('transition-property');
      target.previousElementSibling.style.pointerEvents = 'auto';
    }, duration);
    target.parentNode.classList.remove('is--open');
  };
  var slideDownQna = function slideDownQna(target) {
    var duration = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 400;
    target.style.removeProperty('display');
    var display = window.getComputedStyle(target).display;
    if (display === 'none') display = 'block';
    target.style.display = display;
    var height = target.offsetHeight;
    target.style.overflow = 'hidden';
    target.style.height = 0;
    target.style.paddingTop = 0;
    target.style.paddingBottom = 0;
    target.style.marginTop = 0;
    target.style.marginBottom = 0;
    target.offsetHeight;
    target.style.transitionProperty = "height, margin, padding";
    target.style.transitionDuration = duration + 'ms';
    target.style.height = height + 'px';
    target.style.removeProperty('padding-top');
    target.style.removeProperty('padding-bottom');
    target.style.removeProperty('margin-top');
    target.style.removeProperty('margin-bottom');
    target.previousElementSibling.style.pointerEvents = 'none';
    window.setTimeout(function () {
      target.style.removeProperty('height');
      target.style.removeProperty('overflow');
      target.style.removeProperty('transition-duration');
      target.style.removeProperty('transition-property');
      target.previousElementSibling.style.pointerEvents = 'auto';
    }, duration);
    target.parentNode.classList.add('is--open');
  };
  var slideToggleQna = function slideToggleQna(target) {
    var duration = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 400;
    if (window.getComputedStyle(target).display === 'none') {
      return slideDownQna(target, duration);
    } else {
      return slideUpQna(target, duration);
    }
  };

  // functions
  function changePositionCatalogFilter() {
    var catalogLeft = document.querySelector('.catalog__left');
    var catalogRight = document.querySelector('.catalog__right');
    var catalogSections = document.querySelector('.catalog__sections');
    var catalogMain = document.querySelector('.catalog__main');
    if (catalogLeft && catalogRight) {
      if (catalogSections) {
        if (window.innerWidth <= 1199) {
          setTimeout(function () {
            catalogSections.before(catalogLeft);
          }, 50);
        } else {
          setTimeout(function () {
            catalogRight.before(catalogLeft);
          }, 50);
        }
      }
      if (catalogMain) {
        if (window.innerWidth <= 1199) {
          setTimeout(function () {
            catalogMain.before(catalogLeft);
          }, 50);
        } else {
          setTimeout(function () {
            catalogRight.before(catalogLeft);
          }, 50);
        }
      }
    }
  }
  changePositionCatalogFilter();
  window.addEventListener('resize', function () {
    changePositionCatalogFilter();
  });

  // checker
  var useItemChecker = function useItemChecker(els, onClickOutside) {
    var checkBodyClick = function checkBodyClick(e) {
      var currentEl = e.target;
      while (currentEl) {
        if (els.includes(currentEl)) break;
        currentEl = currentEl.parentNode;
      }
      if (!currentEl) {
        onClickOutside();
        removeBodyChecker();
      }
    };
    function setBodyChecker() {
      document.documentElement.addEventListener('click', checkBodyClick);
    }
    function removeBodyChecker() {
      document.documentElement.removeEventListener('click', checkBodyClick);
    }
    return {
      setBodyChecker: setBodyChecker,
      removeBodyChecker: removeBodyChecker
    };
  };

  // inputmask
  Inputmask().mask(document.querySelectorAll('input'));

  // mobile menu
  var header = document.getElementById('header');
  var mobileMenu = document.getElementById('menu');
  var mobileMenuTrigger = document.getElementById('hamburger-toggle');
  if (mobileMenu && mobileMenuTrigger) {
    mobileMenuTrigger.addEventListener('click', function (event) {
      event.preventDefault();
      if (mobileMenu.classList.contains('is--active')) {
        header.classList.remove('is--menu');
        mobileMenuTrigger.classList.remove('is--active');
        mobileMenu.classList.remove('is--active');
        document.body.classList.remove('scroll-disabled');
      } else {
        header.classList.add('is--menu');
        mobileMenuTrigger.classList.add('is--active');
        mobileMenu.classList.add('is--active');
        document.body.classList.add('scroll-disabled');
      }
    });
  }

  // iframe loading
  var contentVideoIframe = document.querySelectorAll('.content-video__media');
  if (contentVideoIframe) {
    contentVideoIframe.forEach(function (item) {
      item.addEventListener('click', function (event) {
        event.preventDefault();
        var parent = item.closest('.content-video');
        if (!parent.classList.contains('is--active')) {
          parent.classList.add('is--active');
          var frame = parent.querySelector('iframe');
          var link = frame.dataset.src.indexOf('?') > -1 ? frame.dataset.src + '&autoplay=1' : frame.dataset.src + '?autoplay=1';
          frame.setAttribute('src', link);
          frame.removeAttribute('data-src');
        }
      });
    });
  }

  // select
  var sortSelectBox = document.querySelectorAll('.sort-select-box__placeholder');
  var sortSelectBoxOption = document.querySelectorAll('.sort-select-box__option');
  if (sortSelectBox) {
    sortSelectBox.forEach(function (item) {
      var close = function close() {
        document.querySelectorAll('.select-box').forEach(function (child) {
          return child.classList.remove('is--active');
        });
        document.querySelectorAll('.sort-select-box').forEach(function (child) {
          return child.classList.remove('is--active');
        });
      };
      var itemChecker = useItemChecker([item.parentNode].concat(_toConsumableArray(document.querySelectorAll('.sort-select-box'))), close);
      item.addEventListener('click', function () {
        var parent = item.closest('.sort-select-box');
        if (parent.classList.contains('is--active')) {
          close();
        } else {
          close();
          parent.classList.add('is--active');
          itemChecker.setBodyChecker();
        }
      });
    });
    if (sortSelectBoxOption) {
      sortSelectBoxOption.forEach(function (item) {
        item.addEventListener('click', function () {
          var parent = item.closest('.sort-select-box');
          var placeholder = parent.querySelector('.sort-select-box__placeholder span');
          placeholder.innerHTML = item.querySelector('.mark-checkbox__title').innerHTML;
          document.querySelectorAll('.sort-select-box').forEach(function (child) {
            return child.classList.remove('is--active');
          });
        });
      });
    }
  }

  // faq accordeon
  var faqTrigger = document.querySelectorAll('.faq__trigger');
  if (faqTrigger) {
    faqTrigger.forEach(function (item) {
      item.addEventListener('click', function (event) {
        event.preventDefault();
        if (!item.parentNode.classList.contains('is--open')) {
          slideDownQna(item.nextElementSibling);
        } else {
          slideUpQna(item.nextElementSibling);
        }
      });
    });
  }

  // catalog filter sections
  var catalogFilterSectionsTrigger = document.querySelectorAll('.catalog-filter-sections__trigger');
  if (catalogFilterSectionsTrigger) {
    catalogFilterSectionsTrigger.forEach(function (item) {
      var close = function close() {
        var parent = item.closest('.catalog-filter-sections');
        parent.classList.remove('is--active');
      };
      var itemChecker = useItemChecker([item.parentNode], close);
      item.addEventListener('click', function (event) {
        event.preventDefault();
        var parent = item.closest('.catalog-filter-sections');
        if (window.innerWidth >= 1200) {
          if (!parent.classList.contains('is--open')) {
            slideDownQna(item.nextElementSibling);
          } else {
            slideUpQna(item.nextElementSibling);
          }
        } else {
          if (!parent.classList.contains('is--active')) {
            parent.classList.add('is--active');
            itemChecker.setBodyChecker();
          } else {
            close();
          }
        }
      });
    });
  }

  // quiz stages
  var quizHolders = document.querySelectorAll('.quiz-questions__holder');
  var quizNextBtn = document.querySelectorAll('.quiz-questions__btn--next');
  var quizPrevBtn = document.querySelectorAll('.quiz-questions__back');
  var quizStageItems = document.querySelectorAll('.quiz-stages__item');
  var quizStageBanners = document.querySelectorAll('.quiz-banner__holder');
  var quizProgress = document.querySelector('.quiz-stages__progress');
  var currentStage = 1;
  if (quizHolders && quizStageItems && quizStageBanners && quizProgress) {
    var showStage = function showStage(stage) {
      quizHolders.forEach(function (holder) {
        holder.classList.remove('is--active');
        if (parseInt(holder.getAttribute('data-stage')) === stage) {
          holder.classList.add('is--active');
        }
      });
      quizProgress.className = "quiz-stages__progress quiz-stages__progress--".concat(stage);
      quizStageItems.forEach(function (item) {
        item.classList.remove('is--active');
        if (parseInt(item.getAttribute('data-stage')) === stage) {
          item.classList.add('is--active');
        }
      });
      quizStageBanners.forEach(function (item) {
        item.classList.remove('is--active');
        if (parseInt(item.getAttribute('data-stage')) === stage) {
          item.classList.add('is--active');
        }
      });
    };
    var checkSelection = function checkSelection() {
      var currentHolder = quizHolders[currentStage - 1];
      var checked = currentHolder.querySelector('input[type="radio"]:checked');
      return checked !== null;
    };
    if (quizNextBtn) {
      quizNextBtn.forEach(function (button) {
        button.addEventListener('click', function (event) {
          event.preventDefault();
          if (checkSelection()) {
            currentStage++;
            if (currentStage > quizHolders.length) currentStage = quizHolders.length;
            showStage(currentStage);
          }
        });
      });
    }
    if (quizPrevBtn) {
      quizPrevBtn.forEach(function (button) {
        button.addEventListener('click', function (event) {
          event.preventDefault();
          if (currentStage > 1) {
            currentStage--;
            showStage(currentStage);
          }
        });
      });
    }
    showStage(1);
  }

  // reviews slider
  var reviewsSlider = document.querySelector('.reviews__slider:not(.reviews__slider--indent) .swiper');
  var reviewsIndentSlider = document.querySelector('.reviews__slider--indent .swiper');
  if (reviewsSlider) {
    var myReviewsSlider = new Swiper(reviewsSlider, {
      slidesPerView: 'auto',
      spaceBetween: 56,
      loop: true,
      pagination: {
        el: '.reviews__slider .swiper-pagination',
        type: 'bullets',
        clickable: true
      },
      navigation: {
        prevEl: '.reviews__slider .swiper-button-prev',
        nextEl: '.reviews__slider .swiper-button-next'
      },
      breakpoints: {
        0: {
          spaceBetween: 10
        },
        375: {
          spaceBetween: 30
        },
        768: {
          spaceBetween: 12
        },
        1400: {
          spaceBetween: 56
        }
      }
    });
  }
  if (reviewsIndentSlider) {
    var myReviewsIndentSlider = new Swiper(reviewsIndentSlider, {
      slidesPerView: 'auto',
      spaceBetween: 56,
      loop: true,
      pagination: {
        el: '.reviews__slider .swiper-pagination',
        type: 'bullets',
        clickable: true
      },
      navigation: {
        prevEl: '.reviews__slider .swiper-button-prev',
        nextEl: '.reviews__slider .swiper-button-next'
      },
      breakpoints: {
        0: {
          spaceBetween: 10
        },
        375: {
          spaceBetween: 20
        },
        768: {
          spaceBetween: 12
        },
        1400: {
          spaceBetween: 56
        }
      }
    });
  }

  // big reviews slider
  var bigReviewsSoloSlider = document.querySelector('.big-reviews__slider .swiper');
  if (bigReviewsSoloSlider) {
    var myBigReviewsSoloSlider = new Swiper(bigReviewsSoloSlider, {
      slidesPerView: 1,
      spaceBetween: 60,
      loop: true,
      pagination: {
        el: '.big-reviews__slider .swiper-pagination',
        type: 'bullets',
        clickable: true
      },
      navigation: {
        prevEl: '.big-reviews__slider .swiper-button-prev',
        nextEl: '.big-reviews__slider .swiper-button-next'
      },
      breakpoints: {
        0: {
          spaceBetween: 10
        },
        375: {
          spaceBetween: 30
        },
        1024: {
          spaceBetween: 20
        },
        1400: {
          spaceBetween: 60
        }
      },
      on: {
        slideChange: setContentExpanded
      }
    });
  }

  // big reviews thumbnail slider
  var bigReviewsMainSlider = document.querySelector('.big-reviews__main-slider .swiper');
  var bigReviewsThumbnailSlider = document.querySelector('.big-reviews__thumbnail .swiper');
  if (bigReviewsMainSlider && bigReviewsThumbnailSlider) {
    var myBigReviewsThumbnailSlider = new Swiper(bigReviewsThumbnailSlider, {
      spaceBetween: 30,
      slidesPerView: 'auto',
      watchSlidesVisibility: true,
      watchSlidesProgress: true,
      breakpoints: {
        0: {
          allowTouchMove: true
        },
        768: {
          allowTouchMove: false
        }
      }
    });
    var myBigReviewsMainSlider = new Swiper(bigReviewsMainSlider, {
      slidesPerView: 1,
      spaceBetween: 60,
      pagination: {
        el: '.big-reviews__main-slider .swiper-pagination',
        type: 'bullets',
        clickable: true
      },
      navigation: {
        prevEl: '.big-reviews__main-slider .swiper-button-prev',
        nextEl: '.big-reviews__main-slider .swiper-button-next'
      },
      breakpoints: {
        0: {
          spaceBetween: 10
        },
        375: {
          spaceBetween: 30
        },
        1024: {
          spaceBetween: 20
        },
        1400: {
          spaceBetween: 60
        }
      },
      thumbs: {
        swiper: myBigReviewsThumbnailSlider
      },
      on: {
        slideChange: setContentExpanded
      }
    });
    bigReviewsThumbnailSlider.querySelectorAll('.swiper-slide').forEach(function (item) {
      item.addEventListener('click', function () {
        bigReviewsThumbnailSlider.querySelectorAll('.swiper-slide').forEach(function (child) {
          return child.classList.remove('is--active');
        });
        item.classList.add('is--active');
        myBigReviewsThumbnailSlider.slideTo(item.dataset.index);
      });
    });
    myBigReviewsMainSlider.on('slideChange', function () {
      myBigReviewsThumbnailSlider.slideTo(myBigReviewsMainSlider.realIndex);
      bigReviewsThumbnailSlider.querySelectorAll('.swiper-slide').forEach(function (child) {
        return child.classList.remove('is--active');
      });
      bigReviewsThumbnailSlider.querySelectorAll('.swiper-slide')[myBigReviewsMainSlider.realIndex].classList.add('is--active');
    });
  }

  // portfolio slider
  var portfolioSlider = document.querySelector('.portfolio__slider .swiper');
  if (portfolioSlider && window.innerWidth <= 767) {
    var myPortfolioSlider = new Swiper(portfolioSlider, {
      slidesPerView: 'auto',
      spaceBetween: 30,
      loop: true,
      navigation: {
        prevEl: '.portfolio__slider .swiper-button-prev',
        nextEl: '.portfolio__slider .swiper-button-next'
      },
      breakpoints: {
        0: {
          spaceBetween: 10
        },
        375: {
          spaceBetween: 30
        }
      }
    });
  }

  // special offers slider
  var specialOffersSlider = document.querySelector('.special-offers__slider .swiper');
  if (specialOffersSlider && window.innerWidth <= 767) {
    var mySpecialOffersSlider = new Swiper(specialOffersSlider, {
      slidesPerView: 'auto',
      spaceBetween: 15,
      navigation: {
        prevEl: '.special-offers__slider .swiper-button-prev',
        nextEl: '.special-offers__slider .swiper-button-next'
      }
    });
  }

  // main catalog slider
  var mainCatalogSlider = document.querySelector('.main-catalog__slider .swiper');
  if (mainCatalogSlider && window.innerWidth <= 767) {
    var myMainCatalogSlider = new Swiper(mainCatalogSlider, {
      slidesPerView: 'auto',
      spaceBetween: 20,
      loop: true,
      navigation: {
        prevEl: '.main-catalog__slider .swiper-button-prev',
        nextEl: '.main-catalog__slider .swiper-button-next'
      }
    });
  }

  // catalog slider
  var catalogSlider = document.querySelectorAll('.catalog__slider:not(.catalog__slider--sm) .swiper');
  var catalogSmSlider = document.querySelectorAll('.catalog__slider--sm .swiper');
  if (catalogSlider) {
    catalogSlider.forEach(function (slider) {
      var myCatalogSlider = new Swiper(slider, {
        slidesPerView: 4,
        spaceBetween: 20,
        loop: true,
        watchOverflow: true,
        navigation: {
          prevEl: slider.closest('.catalog__slider').querySelector('.swiper-button-prev'),
          nextEl: slider.closest('.catalog__slider').querySelector('.swiper-button-next')
        },
        pagination: {
          el: slider.closest('.catalog__slider').querySelector('.swiper-pagination'),
          type: 'bullets',
          clickable: true
        },
        breakpoints: {
          0: {
            slidesPerView: 'auto',
            spaceBetween: 10
          },
          375: {
            slidesPerView: 'auto',
            spaceBetween: 30
          },
          1024: {
            slidesPerView: 3,
            spaceBetween: 20
          },
          1200: {
            slidesPerView: 4,
            spaceBetween: 20
          }
        }
      });
    });
  }
  if (catalogSmSlider) {
    catalogSmSlider.forEach(function (slider) {
      var myCatalogSmSlider = new Swiper(slider, {
        slidesPerView: 4,
        spaceBetween: 20,
        loop: true,
        watchOverflow: true,
        navigation: {
          prevEl: slider.closest('.catalog__slider').querySelector('.swiper-button-prev'),
          nextEl: slider.closest('.catalog__slider').querySelector('.swiper-button-next')
        },
        pagination: {
          el: slider.closest('.catalog__slider').querySelector('.swiper-pagination'),
          type: 'bullets',
          clickable: true
        },
        breakpoints: {
          0: {
            slidesPerView: 'auto',
            spaceBetween: 10
          },
          375: {
            slidesPerView: 'auto',
            spaceBetween: 30
          },
          1024: {
            slidesPerView: 3,
            spaceBetween: 20
          },
          1800: {
            slidesPerView: 4,
            spaceBetween: 20
          }
        }
      });
    });
  }

  // install sewerage slider
  var installSewerageSlider = document.querySelector('.install-sewerage__slider .swiper');
  if (installSewerageSlider && window.innerWidth <= 767) {
    var myInstallSewerageSlider = new Swiper(installSewerageSlider, {
      slidesPerView: 'auto',
      spaceBetween: 20,
      loop: true,
      navigation: {
        prevEl: '.install-sewerage__slider .swiper-button-prev',
        nextEl: '.install-sewerage__slider .swiper-button-next'
      }
    });
  }

  // official dealer slider
  var officialDealerSlider = document.querySelector('.official-dealer__slider .swiper');
  if (officialDealerSlider) {
    var myOfficialDealerSlider = new Swiper(officialDealerSlider, {
      slidesPerView: 1,
      spaceBetween: 40,
      loop: true,
      pagination: {
        el: '.official-dealer__slider .swiper-pagination',
        type: 'bullets',
        clickable: true
      },
      navigation: {
        prevEl: '.official-dealer__slider .swiper-button-prev',
        nextEl: '.official-dealer__slider .swiper-button-next'
      }
    });
  }

  // certificates slider
  var certificatesSlider = document.querySelector('.certificates__slider .swiper');
  if (certificatesSlider) {
    var myCertificatesSlider = new Swiper(certificatesSlider, {
      slidesPerView: 3,
      spaceBetween: 100,
      loop: true,
      pagination: {
        el: '.certificates__slider .swiper-pagination',
        type: 'bullets',
        clickable: true
      },
      navigation: {
        prevEl: '.certificates__slider .swiper-button-prev',
        nextEl: '.certificates__slider .swiper-button-next'
      },
      breakpoints: {
        0: {
          slidesPerView: 1,
          spaceBetween: 20
        },
        1024: {
          slidesPerView: 3,
          spaceBetween: 100
        }
      }
    });
  }

  // services slider
  var servicesSlider = document.querySelector('.services__slider .swiper');
  if (servicesSlider && window.innerWidth <= 767) {
    var myServicesSlider = new Swiper(servicesSlider, {
      slidesPerView: 'auto',
      spaceBetween: 30,
      loop: true,
      navigation: {
        prevEl: '.services__slider .swiper-button-prev',
        nextEl: '.services__slider .swiper-button-next'
      },
      breakpoints: {
        0: {
          spaceBetween: 10
        },
        375: {
          spaceBetween: 30
        }
      }
    });
  }

  // articles slider
  var articlesSlider = document.querySelector('.articles__slider .swiper');
  if (articlesSlider && window.innerWidth <= 767) {
    var myArticlesSlider = new Swiper(articlesSlider, {
      slidesPerView: 'auto',
      spaceBetween: 30,
      loop: true,
      navigation: {
        prevEl: '.articles__slider .swiper-button-prev',
        nextEl: '.articles__slider .swiper-button-next'
      },
      breakpoints: {
        0: {
          spaceBetween: 10
        },
        375: {
          spaceBetween: 30
        }
      }
    });
  }

  // // big reviews
  var bigReviewsContent = document.querySelectorAll('.big-reviews-card__content');
  var bigReviewsExpandBtn = document.querySelectorAll('.big-reviews-card__expand-btn');
  if (bigReviewsContent) {
    bigReviewsContent.forEach(function (content) {
      content.style.setProperty('--full-height', content.scrollHeight + 'px');
      content.classList.add('is--expanded');
    });
  }
  if (bigReviewsExpandBtn) {
    bigReviewsExpandBtn.forEach(function (button) {
      button.addEventListener('click', function (event) {
        event.preventDefault();
        var parent = button.closest('.big-reviews-card__body');
        var content = parent.querySelector('.big-reviews-card__content');
        if (content.classList.contains('is--expanded')) {
          content.classList.remove('is--expanded');
          button.innerHTML = 'Скрыть';
        } else {
          content.classList.add('is--expanded');
          button.innerHTML = 'Показать больше';
        }
      });
    });
  }
  function setContentExpanded() {
    document.querySelectorAll('.big-reviews-card__content').forEach(function (child) {
      return child.classList.add('is--expanded');
    });
    document.querySelectorAll('.big-reviews-card__expand-btn').forEach(function (child) {
      return child.innerHTML = 'Показать больше';
    });
  }
});